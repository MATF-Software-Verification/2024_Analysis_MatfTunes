# Project Analysis Report — MatfTunes

## About this report

## 1. Author
- **Name:** Anja Čolić  
- **Course:** Software Verification  
- **Academic Year:** 2024/2025  
- **Faculty:** Faculty of Mathematics, University of Belgrade  

---

## 2. Project Overview
- **Project name:** MatfTunes  
- **Repository:** [MatfTunes GitLab](https://gitlab.com/matf-bg-ac-rs/course-rs/projects-2023-2024/MatfTunes)  
- **Commit hash analyzed:** `ee68f33973bf1141c0e8e77be43bd7491eb92818`
---

## 3. Tools Used

1. **cppcheck** 
2. **clang-tidy**

## Tool 1: Cppcheck – Static Code Analysis
Tool purpose:
Cppcheck is a static analysis tool designed to detect potential logical, performance, and stylistic issues in C++ code without executing it.
It performs deep parsing of source files to identify code patterns that may indicate bugs, poor practices, or inefficiencies.

Scope of analysis:
The analysis was executed over the entire source directory: matftunes/MatfTunes/src/\
Command and configuration:
The following command was run automatically using the script cppcheck/run_cppcheck.sh: cppcheck --enable=all --inconclusive --std=c++17 --force \
  --cppcheck-build-dir=cppcheck_build matftunes/MatfTunes/src/
Cppcheck was configured to perform:
1. Full rule set analysis (--enable=all)
2. Inconclusive and performance checks
3. XML report generation for HTML visualization
4. Force analysis across all translation units

Reports generated:
1. cppcheck/results/cppcheck_<date>.txt 
2. cppcheck/results/cppcheck_<date>.xml 
3. cppcheck/html-report/index.html – HTML

Interpretation of Results

Cppcheck found no critical memory or logical errors, confirming that the MatfTunes project is robust and well-written.
The issues reported were mainly stylistic or best-practice related:

- Code clarity: Several functions could benefit from adding the override keyword to clarify inheritance behavior.
- Safety: Constructors should be marked explicit to avoid unintended implicit conversions.
- Performance: Initialization within the constructor body can be moved to initialization lists.
- Maintainability: A few unused functions and variables were detected and can be safely removed.

Below is a screenshot of the generated HTML analysis report showing a subset of identified issues:
<img width="1573" height="745" alt="CppCheckScreenshot" src="https://github.com/user-attachments/assets/37d79123-3ff3-4621-a1c8-4b4fda2fac59" />


Conclusions:
1. No severe logical or memory errors were found.
2. Minor issues related to code readability, parameter consistency, and unused functions.
Recommendations:
1. Mark overridden functions explicitly with override.
2. Initialize all member variables in constructors.
3. Remove unused code fragments to improve maintainability.

Overall, the Cppcheck analysis demonstrates that the MatfTunes codebase is well-structured and maintainable, with only minimal refinements suggested for code style and clarity.

## Tool 2: Clang-Tidy – Static Code Quality and Style Analysis
Tool purpose:
To verify code style, structure, and C++ best practices.
The analysis was performed on the entire MatfTunes source code, using the compile_commands.json file generated by CMake.

Scope of analysis:
Entire source directory: matftunes/MatfTunes/src/.\
Command and configuration:
Executed using the script clang-tidy/run_clang_tidy.sh: cmake -S ../matftunes/MatfTunes -B build -DCMAKE_EXPORT_COMPILE_COMMANDS=ON
clang-tidy *.cpp --warnings-as-errors=* --export-fixes=results/clang_tidy_fixes.yaml -p build > results/clang_tidy_report.txt
<img width="935" height="476" alt="ScriptStartingScreenshot" src="https://github.com/user-attachments/assets/69668b20-7d66-4c25-8f71-fc5a4ee48f17" />


Clang-Tidy checks were configured to:
1. Treat all warnings as errors (--warnings-as-errors=*)
2. Export suggested code fixes to clang_tidy_fixes.yaml

Reports generated:
1. clang-tidy/results/clang_tidy_report.txt
2. clang-tidy/results/clang_tidy_fixes.yaml

Results summary:
Clang-Tidy successfully performed a structural analysis of the project, identifying several categories of issues:
- Missing generated headers:
Some files (ui_*.h) were not found because Qt automatically generates them during the build process.
This is expected and does not indicate actual source errors.
- Memory management warning:
Potential memory leak detected in songlibrary.cpp, where the dynamically allocated Song object may not be freed if early return occurs.
- General observations:
1. Several header inclusions can be simplified.
2. Some functions could benefit from const correctness and override usage.

Conclusions:
1. Clang-Tidy confirms the code follows modern C++ standards.
2. Most issues are minor and stylistic (missing headers generated by Qt).
3. The significant finding was a potential memory leak, which should be reviewed.

Recommendations:
1. Regenerate missing ui_*.h files through Qt Creator before full static analysis.
2. Review the memory management logic in SongLibrary::addSong().
3. Apply suggested automatic fixes from clang_tidy_fixes.yaml to improve code consistency and style.

## Repository Structure (current)
├── cppcheck
├── .git
├── .github
│   └── workflows
├── .gitmodules
├── matftunes
├── ProjectAnalysisReport.md
├── README.md



This report will be updated progressively

